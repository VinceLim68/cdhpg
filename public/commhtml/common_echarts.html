
<script src="__JS__/echarts.js"></script>
<style type="text/css">
/* 超小屏幕（手机，小于 768px） */
/* 没有任何媒体查询相关的代码，因为这在 Bootstrap 中是默认的（还记得 Bootstrap 是移动设备优先的吗？） */
#modal_echarts {
	width:360px;
}
/* 小屏幕（平板，大于等于 768px） */
@media (min-width: 768px) {
	#modal_echarts {
		width:600px;
	}
}

/* 中等屏幕（桌面显示器，大于等于 992px） */
@media (min-width: 992px) {
	#modal_echarts {
		width:960px;
	}
}

/* 大屏幕（大桌面显示器，大于等于 1200px） */
@media (min-width: 1200px) {
	#modal_echarts {
		width:960px;
	}
}
</style>

<!-- 为ECharts准备一个模态框 -->
<div class="modal fade" id="Echarts" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" ></h4>
	      	</div>
			<div class="modal-body" id="modal_echarts"
				style="height: 400px;"></div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('modal_echarts'));

    //使用函数配置Echarts,这个是获取历史价格走势图
    function setEcharts(data){
    	// 把返回的data构造成Echarts的格式
	    var price = [];
	    for (var x in data.mean)
	    {
	    	var item ={};
	    	item.type = 'line';
	    	item.data = data.mean[x];
	    	item.name = '挂牌价';
	    	price.push(item);
	    }
	    for (var x in data.price)
	    {
	    	var item ={};
	    	item.type = 'line';
	    	item.data = data.price[x];
	    	item.name = '评估价';
	    	price.push(item);
	    }
	    for (var x in data.ori_len)
	    {
	    	var item ={};
	    	item.type = 'bar';
	    	item.data = data.ori_len[x];
	    	item.yAxisIndex = 1;
	    	item.name = '挂牌数量';
	    	price.push(item);
	    }

	    //给Echarts使用刚构造的数据并指定配置项显示图表。
	    myChart.setOption({
    	    //title: {
		    //    text: '房价走势'
		    //},
		    tooltip: {
		        trigger: 'axis',
		        axisPointer: {
		            type: 'cross',
		            crossStyle: {
		                color: '#999'
		            }
		        }
		    },
		    legend: {
		        data:['挂牌价','评估价','挂牌数量']
		    },
		    xAxis: {
		        type: 'category',
		     	data: data.dtime
		    },
		    yAxis: [
		        {
		            type: 'value',
		            name: '单价',
		        },
		        {
		            type: 'value',
		            name: '挂牌数量',
		            show:false,
		            //position:'left',
		            max: function(value) {
		                return value.max * 2;
		            }
		        }
		    ],
	        series: price,
	    },true);
    }
    
    function setAreaPriceEcharts(list){
    	//console.log(list);
    	var areaPrice = [];
    	for (var x in list)
 	    {
 	    	var item =[];
 	    	item.push(list[x]['price']);
 	    	item.push(list[x]['area']);
 	    	areaPrice.push(item);
 	    }
    	
    	option = {
   			 title: {
   				 left: 'center',
   			        text: $("#hidefeild").attr("comm_name"),
   			        subtext: '楼价/面积分布'
   			    },
   			    tooltip: {
   			    	trigger: 'axis',
   			        axisPointer: {
   			            type: 'cross',
   			            crossStyle: {
   			                color: '#999'
   			            }
   			        }
   			    },
   		    xAxis: {
   		        scale: true,
   		        name: '元',
   		    },
   		    yAxis: {
   		        scale: true,
   		        name:'平米',
   		    },
   		    series: [{
   		        type: 'effectScatter',
   		        symbolSize: 20,
   		    }, {
   		        type: 'scatter',
   		        data: areaPrice,
   		    }]
   		};

           // 使用刚指定的配置项和数据显示图表。
         myChart.setOption(option,true);
    }
       
</script>

